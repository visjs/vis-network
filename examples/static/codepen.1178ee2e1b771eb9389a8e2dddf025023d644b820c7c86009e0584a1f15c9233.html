<html>
  <head>
    <meta charset="utf-8" />
    <title>Vis Network | Data | Dynamic filtering</title>
  </head>
  <body>
    <form
      id="form"
      action="https://codepen.io/pen/define"
      method="post"
      target="_self"
    >
      <input
        type="hidden"
        name="data"
        value='{"css":"#mynetwork {\n  width: 600px;\n  height: 400px;\n  border: 1px solid lightgray;\n}\nbody {\n  font-family:\n    -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\",\n    \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\ncode {\n  font-family:\n    source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace;\n}\n","css_external":"","html":"<h1>Dynamic filtering</h1>\n<p>\n  With\n  <a href=\"https://visjs.github.io/vis-data/data/dataview.html\" target=\"_blank\">\n    <code>vis.DataView</code></a\n  >\n  on top of vis.DataSet you can filter displayed data without modifying the data\n  source.\n</p>\n<label>\n  Filter nodes\n  <select id=\"nodeFilterSelect\">\n    <option value=\"\">All characters</option>\n    <option value=\"kid\">kids</option>\n    <option value=\"adult\">adults</option>\n    <option value=\"male\">male</option>\n    <option value=\"female\">female</option>\n  </select>\n</label>\n<br />\n<br />\n<label>\n  Filter edges\n  <div>\n    <label>\n      <input type=\"checkbox\" name=\"edgesFilter\" value=\"parent\" checked=\"\" />\n      Is <span style=\"color: green\">parent</span> of\n    </label>\n  </div>\n  <div>\n    <label>\n      <input type=\"checkbox\" name=\"edgesFilter\" value=\"teacher\" checked=\"\" />\n      Is <span style=\"color: blue\">teacher</span> of\n    </label>\n  </div>\n  <div>\n    <label>\n      <input type=\"checkbox\" name=\"edgesFilter\" value=\"friend\" checked=\"\" />\n      Is <span style=\"color: red\">friend</span> of\n    </label>\n  </div>\n</label>\n<br />\n<div id=\"mynetwork\"></div>\n","js":"const nodeFilterSelector = document.getElementById(\"nodeFilterSelect\");\nconst edgeFilters = document.getElementsByName(\"edgesFilter\");\n\nfunction startNetwork(data) {\n  const container = document.getElementById(\"mynetwork\");\n  const options = {};\n  new vis.Network(container, data, options);\n}\n\n/**\n * In this example we do not mutate nodes or edges source data.\n */\nconst nodes = new vis.DataSet([\n  { id: 1, label: \"Eric Cartman\", age: \"kid\", gender: \"male\" },\n  { id: 2, label: \"Stan Marsh\", age: \"kid\", gender: \"male\" },\n  { id: 3, label: \"Wendy Testaburger\", age: \"kid\", gender: \"female\" },\n  { id: 4, label: \"Mr Mackey\", age: \"adult\", gender: \"male\" },\n  { id: 5, label: \"Sharon Marsh\", age: \"adult\", gender: \"female\" },\n]);\n\nconst edges = new vis.DataSet([\n  {\n    from: 1,\n    to: 2,\n    relation: \"friend\",\n    arrows: \"to, from\",\n    color: { color: \"red\" },\n  },\n  {\n    from: 1,\n    to: 3,\n    relation: \"friend\",\n    arrows: \"to, from\",\n    color: { color: \"red\" },\n  },\n  {\n    from: 2,\n    to: 3,\n    relation: \"friend\",\n    arrows: \"to, from\",\n    color: { color: \"red\" },\n  },\n  {\n    from: 5,\n    to: 2,\n    relation: \"parent\",\n    arrows: \"to\",\n    color: { color: \"green\" },\n  },\n  {\n    from: 4,\n    to: 1,\n    relation: \"teacher\",\n    arrows: \"to\",\n    color: { color: \"blue\" },\n  },\n  {\n    from: 4,\n    to: 2,\n    relation: \"teacher\",\n    arrows: \"to\",\n    color: { color: \"blue\" },\n  },\n  {\n    from: 4,\n    to: 3,\n    relation: \"teacher\",\n    arrows: \"to\",\n    color: { color: \"blue\" },\n  },\n]);\n\n/**\n * filter values are updated in the outer scope.\n * in order to apply filters to new values, DataView.refresh() should be called\n */\nlet nodeFilterValue = \"\";\nconst edgesFilterValues = {\n  friend: true,\n  teacher: true,\n  parent: true,\n};\n\n/*\n      filter function should return true or false\n      based on whether item in DataView satisfies a given condition.\n    */\nconst nodesFilter = (node) => {\n  if (nodeFilterValue === \"\") {\n    return true;\n  }\n  switch (nodeFilterValue) {\n    case \"kid\":\n      return node.age === \"kid\";\n    case \"adult\":\n      return node.age === \"adult\";\n    case \"male\":\n      return node.gender === \"male\";\n    case \"female\":\n      return node.gender === \"female\";\n    default:\n      return true;\n  }\n};\n\nconst edgesFilter = (edge) => {\n  return edgesFilterValues[edge.relation];\n};\n\nconst nodesView = new vis.DataView(nodes, { filter: nodesFilter });\nconst edgesView = new vis.DataView(edges, { filter: edgesFilter });\n\nnodeFilterSelector.addEventListener(\"change\", (e) => {\n  // set new value to filter variable\n  nodeFilterValue = e.target.value;\n  /*\n        refresh DataView,\n        so that its filter function is re-calculated with the new variable\n      */\n  nodesView.refresh();\n});\n\nedgeFilters.forEach((filter) =>\n  filter.addEventListener(\"change\", (e) => {\n    const { value, checked } = e.target;\n    edgesFilterValues[value] = checked;\n    edgesView.refresh();\n  }),\n);\n\nstartNetwork({ nodes: nodesView, edges: edgesView });\n","js_external":"https://visjs.github.io/vis-network/standalone/umd/vis-network.min.js","title":"Vis Network | Data | Dynamic filtering"}'
      />
      <button id="open" alt="JSFiddle" title="JSFiddle">Open CodePen</button>
    </form>

    <script type="text/javascript">
      document.getElementById("open").click();
    </script>
  </body>
</html>
