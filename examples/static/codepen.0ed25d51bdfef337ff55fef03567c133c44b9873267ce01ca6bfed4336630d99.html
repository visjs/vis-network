<html>
  <head>
    <meta charset="utf-8" />
    <title>Vis Network | Layouts | Dynamic Hierarchical Layout Changes</title>
  </head>
  <body>
    <form
      id="form"
      action="https://codepen.io/pen/define"
      method="post"
      target="_self"
    >
      <input
        type="hidden"
        name="data"
        value='{"css":"html,\nbody {\n  height: 100%;\n  width: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n\n.mycontainer {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n#mynetwork {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n","css_external":"","html":"<div class=\".mycontainer\">\n  <div id=\"mynetwork\"></div>\n</div>\n","js":"var nodes = Array(31)\n  .fill(null)\n  .map((_, i) => ({ id: i + 1, label: `${i + 1}` }));\nvar edges = [\n  { from: 1, to: 2 },\n  { from: 1, to: 3 },\n  { from: 2, to: 4 },\n  { from: 2, to: 5 },\n  { from: 3, to: 6 },\n  { from: 3, to: 7 },\n  { from: 4, to: 8 },\n  { from: 4, to: 9 },\n  { from: 5, to: 10 },\n  { from: 5, to: 11 },\n  { from: 6, to: 12 },\n  { from: 6, to: 13 },\n  { from: 7, to: 14 },\n  { from: 7, to: 15 },\n  { from: 8, to: 16 },\n  { from: 8, to: 17 },\n  { from: 9, to: 18 },\n  { from: 9, to: 19 },\n  { from: 10, to: 20 },\n  { from: 10, to: 21 },\n  { from: 11, to: 22 },\n  { from: 11, to: 23 },\n  { from: 12, to: 24 },\n  { from: 12, to: 25 },\n  { from: 13, to: 26 },\n  { from: 13, to: 27 },\n  { from: 14, to: 28 },\n  { from: 14, to: 29 },\n  { from: 15, to: 30 },\n  { from: 15, to: 31 },\n];\n\n// create a network\nvar container = document.getElementById(\"mynetwork\");\nvar data = {\n  nodes: new vis.DataSet(nodes),\n  edges: new vis.DataSet(edges),\n};\nvar options = {\n  layout: {\n    hierarchical: {\n      direction: \"UD\",\n      sortMethod: \"directed\",\n    },\n  },\n  edges: {\n    arrows: \"to\",\n  },\n};\nnetwork = new vis.Network(container, data, options);\n\n// periodically change the layout\nlet i = 0;\nsetInterval(() => {\n  var leaves = data.nodes.get().filter((node) =>\n    network\n      .getConnectedEdges(node.id)\n      .map((edgeId) => data.edges.get(edgeId))\n      .every((edge) => edge.to === node.id),\n  );\n  var leaf = leaves[i++ % leaves.length];\n\n  var edgeIds = network.getConnectedEdges(leaf.id);\n  var edge = data.edges.get(edgeIds[i++ % edgeIds.length]);\n  var oldParent = data.nodes.get(edge.from);\n\n  while (\n    (i % data.nodes.length) + 1 === leaf.id ||\n    (i % data.nodes.length) + 1 === oldParent.id\n  ) {\n    ++i;\n  }\n  var newParent = data.nodes.get((i++ % data.nodes.length) + 1);\n\n  data.edges.update({\n    id: edge.id,\n    from: newParent.id,\n  });\n\n  console.info(\n    `Node ${leaf.id} was reconnected from it&apos;s former parent node ${oldParent.id} to node ${newParent.id}.`,\n  );\n}, 1000);\n","js_external":"https://visjs.github.io/vis-network/dist/vis-network.js","title":"Vis Network | Layouts | Dynamic Hierarchical Layout Changes"}'
      />
      <button id="open" alt="JSFiddle" title="JSFiddle">Open CodePen</button>
    </form>

    <script type="text/javascript">
      document.getElementById("open").click();
    </script>
  </body>
</html>
